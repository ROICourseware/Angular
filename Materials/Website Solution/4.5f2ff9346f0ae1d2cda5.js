(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{RMLy:function(e,t,r){"use strict";r.r(t),r.d(t,"ReviewsModule",function(){return k});var i=r("AytR"),o=r("fXoL"),n=r("tk/3");let s=(()=>{class e{constructor(e){this.httpClient=e}getReviews(e){return this.httpClient.get(i.a.url+"Reviews/"+e).toPromise().catch(this.handleError)}getBook(e){return this.httpClient.get(i.a.url+"Books/"+e).toPromise().catch(this.handleError)}addReview(e){return this.httpClient.post(i.a.url+"Reviews",e).toPromise().catch(this.handleError)}handleError(e){return Promise.reject(e.message?e.message:e.status?`${e.status} - ${e.statusText}`:"Server error")}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(n.a))},e.\u0275prov=o.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=r("3Pt+"),c=r("ofXK"),a=r("tyNb"),d=r("J1Ni"),l=r("BQKZ");class v{constructor(e,t){this.content=e,this.bookId=t}}function u(e,t){1&e&&(o.Jb(0,"div",8),o.dc(1," Review must have content "),o.Ib())}function h(e,t){1&e&&(o.Jb(0,"div",8),o.dc(1," Review must be at least 5 characters long "),o.Ib())}function w(e,t){if(1&e&&(o.Jb(0,"div"),o.cc(1,u,2,0,"div",7),o.cc(2,h,2,0,"div",7),o.Ib()),2&e){o.Rb();const e=o.Zb(6);o.wb(1),o.Ub("ngIf",e.errors&&e.errors.required),o.wb(1),o.Ub("ngIf",e.errors&&e.errors.minlength)}}let f=(()=>{class e{constructor(){this.createReview=new o.n,this.bookId=0,this.review=new v("",0)}ngOnInit(){this.review=new v("",this.bookId)}submit(){this.createReview.emit(this.review)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ab({type:e,selectors:[["app-review-form"]],inputs:{bookId:"bookId"},outputs:{createReview:"createReview"},decls:10,vars:3,consts:[["name","reviewForm","novalidate","",1,"form-inline",3,"ngSubmit"],["reviewForm","ngForm"],[1,"form-group"],["minlength","5","type","text","required","","name","content",1,"form-control",3,"ngModel","ngModelChange"],["content","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e&&(o.Jb(0,"form",0,1),o.Pb("ngSubmit",function(){return t.submit()}),o.Jb(2,"div",2),o.Jb(3,"label"),o.dc(4,"Review: "),o.Jb(5,"input",3,4),o.Pb("ngModelChange",function(e){return t.review.content=e}),o.Ib(),o.Ib(),o.Jb(7,"button",5),o.dc(8,"Add Review"),o.Ib(),o.Ib(),o.cc(9,w,3,2,"div",6),o.Ib()),2&e){const e=o.Zb(1),r=o.Zb(6);o.wb(5),o.Ub("ngModel",t.review.content),o.wb(2),o.Ub("disabled",!e.form.valid),o.wb(2),o.Ub("ngIf",!(r.valid||r.pristine))}},directives:[b.p,b.j,b.k,b.a,b.h,b.n,b.i,b.l,c.j],styles:[""]}),e})();function g(e,t){if(1&e&&(o.Jb(0,"div",6),o.dc(1),o.Ib()),2&e){const e=o.Rb();o.wb(1),o.fc(" Sorry, there's been an error communicating with the server: ",e.errorMessage,"\n")}}function p(e,t){if(1&e&&(o.Jb(0,"tr"),o.Jb(1,"td"),o.dc(2),o.Ib(),o.Ib()),2&e){const e=t.$implicit;o.Ub("@slideUp",void 0),o.wb(2),o.ec(e.content)}}const m=[{path:":id",component:(()=>{class e{constructor(e,t){this.route=e,this.reviewService=t,this.bookId=-1,this.reviews=[],this.book=new l.a("","","",this.bookId),this.errorMessage=""}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&(this.bookId=+e,this.reviewService.getReviews(this.bookId).then(e=>this.reviews=e),this.reviewService.getBook(this.bookId).then(e=>this.book=e))}addReview(e){e.bookId=this.bookId,this.reviewService.addReview(e).then(e=>{this.reviews.push(e)}).catch(e=>this.errorMessage=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Gb(a.a),o.Gb(s))},e.\u0275cmp=o.Ab({type:e,selectors:[["app-review-list"]],decls:13,vars:4,consts:[[3,"bookId","createReview"],["class","alert alert-danger",4,"ngIf"],[1,"row"],[1,"col-lg-8","col-sm-offset-1"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(o.Jb(0,"h1"),o.dc(1),o.Ib(),o.Jb(2,"app-review-form",0),o.Pb("createReview",function(e){return t.addReview(e)}),o.Ib(),o.cc(3,g,2,1,"div",1),o.Jb(4,"div",2),o.Jb(5,"div",3),o.Jb(6,"table",4),o.Jb(7,"thead"),o.Jb(8,"tr"),o.Jb(9,"th"),o.dc(10,"Review"),o.Ib(),o.Ib(),o.Ib(),o.Jb(11,"tbody"),o.cc(12,p,3,2,"tr",5),o.Ib(),o.Ib(),o.Ib(),o.Ib()),2&e&&(o.wb(1),o.fc("Reviews for ",null==t.book?null:t.book.title,""),o.wb(1),o.Ub("bookId",t.bookId),o.wb(1),o.Ub("ngIf",t.errorMessage),o.wb(9),o.Ub("ngForOf",t.reviews))},directives:[f,c.j,c.i],styles:[""],data:{animation:[d.b]}}),e})(),data:{animation:"reviewPage"}}];let I=(()=>{class e{}return e.\u0275mod=o.Eb({type:e}),e.\u0275inj=o.Db({factory:function(t){return new(t||e)},imports:[[a.d.forChild(m)],a.d]}),e})(),k=(()=>{class e{}return e.\u0275mod=o.Eb({type:e}),e.\u0275inj=o.Db({factory:function(t){return new(t||e)},providers:[s],imports:[[c.c,I,b.g]]}),e})()}}]);