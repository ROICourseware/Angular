(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Vhdi:function(n,l,u){"use strict";u.r(l);var t=u("CcnG"),e=function(){return function(){}}(),o=u("pMnS"),i=u("Ip0R"),r=u("gIcY"),s=function(){return function(n,l){this.content=n,this.bookId=l}}(),b=function(){function n(){this.createReview=new t.m}return n.prototype.ngOnInit=function(){this.review=new s("",this.bookId)},n.prototype.submit=function(){this.createReview.emit(this.review)},n}(),a=t.nb({encapsulation:0,styles:[[".form-group[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}"]],data:{}});function c(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" Review must have content "]))],null,null)}function p(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" Review must be at least 5 characters long "]))],null,null)}function d(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),t.gb(16777216,null,null,1,null,c)),t.ob(2,16384,null,0,i.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,null,1,null,p)),t.ob(4,16384,null,0,i.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,t.yb(l.parent,14).errors.required),n(l,4,0,t.yb(l.parent,14).errors.minlength)},null)}function g(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,20,"form",[["class","form-inline"],["name","reviewForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,u){var e=!0,o=n.component;return"submit"===l&&(e=!1!==t.yb(n,2).onSubmit(u)&&e),"reset"===l&&(e=!1!==t.yb(n,2).onReset()&&e),"ngSubmit"===l&&(e=!1!==o.submit()&&e),e},null,null)),t.ob(1,16384,null,0,r.v,[],null,null),t.ob(2,4210688,[["reviewForm",4]],0,r.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Db(2048,null,r.b,null,[r.p]),t.ob(4,16384,null,0,r.o,[[4,r.b]],null,null),(n()(),t.pb(5,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),t.pb(6,0,null,null,10,"label",[],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Review: "])),(n()(),t.pb(8,0,null,null,8,"input",[["class","form-control"],["minlength","5"],["name","content"],["required",""],["type","text"]],[[1,"required",0],[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,u){var e=!0,o=n.component;return"input"===l&&(e=!1!==t.yb(n,9)._handleInput(u.target.value)&&e),"blur"===l&&(e=!1!==t.yb(n,9).onTouched()&&e),"compositionstart"===l&&(e=!1!==t.yb(n,9)._compositionStart()&&e),"compositionend"===l&&(e=!1!==t.yb(n,9)._compositionEnd(u.target.value)&&e),"ngModelChange"===l&&(e=!1!==(o.review.content=u)&&e),e},null,null)),t.ob(9,16384,null,0,r.c,[t.D,t.k,[2,r.a]],null,null),t.ob(10,16384,null,0,r.s,[],{required:[0,"required"]},null),t.ob(11,540672,null,0,r.j,[],{minlength:[0,"minlength"]},null),t.Db(1024,null,r.k,function(n,l){return[n,l]},[r.s,r.j]),t.Db(1024,null,r.l,function(n){return[n]},[r.c]),t.ob(14,671744,[["content",4]],0,r.q,[[2,r.b],[6,r.k],[8,null],[6,r.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,r.m,null,[r.q]),t.ob(16,16384,null,0,r.n,[[4,r.m]],null,null),(n()(),t.pb(17,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),t.Gb(-1,null,["Add Review"])),(n()(),t.gb(16777216,null,null,1,null,d)),t.ob(20,16384,null,0,i.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var u=l.component;n(l,10,0,""),n(l,11,0,"5"),n(l,14,0,"content",u.review.content),n(l,20,0,!(t.yb(l,14).valid||t.yb(l,14).pristine))},function(n,l){n(l,0,0,t.yb(l,4).ngClassUntouched,t.yb(l,4).ngClassTouched,t.yb(l,4).ngClassPristine,t.yb(l,4).ngClassDirty,t.yb(l,4).ngClassValid,t.yb(l,4).ngClassInvalid,t.yb(l,4).ngClassPending),n(l,8,0,t.yb(l,10).required?"":null,t.yb(l,11).minlength?t.yb(l,11).minlength:null,t.yb(l,16).ngClassUntouched,t.yb(l,16).ngClassTouched,t.yb(l,16).ngClassPristine,t.yb(l,16).ngClassDirty,t.yb(l,16).ngClassValid,t.yb(l,16).ngClassInvalid,t.yb(l,16).ngClassPending),n(l,17,0,!t.yb(l,2).form.valid)})}var f=u("AytR"),h=u("t/Na"),v=function(){function n(n){this.httpClient=n}return n.prototype.getReviews=function(n){return this.httpClient.get(f.a.url+"Reviews/"+n).toPromise().catch(this.handleError)},n.prototype.getBook=function(n){return this.httpClient.get(f.a.url+"Books/"+n).toPromise().catch(this.handleError)},n.prototype.addReview=function(n){return this.httpClient.post(f.a.url+"Reviews",n).toPromise().catch(this.handleError)},n.prototype.handleError=function(n){return Promise.reject(n.message?n.message:n.status?n.status+" - "+n.statusText:"Server error")},n.ngInjectableDef=t.S({factory:function(){return new n(t.W(h.c))},token:n,providedIn:"root"}),n}(),m=function(){function n(n,l){this.route=n,this.reviewService=l,this.bookId=-1}return n.prototype.ngOnInit=function(){var n=this;this.bookId=+this.route.snapshot.paramMap.get("id"),this.reviewService.getReviews(this.bookId).then(function(l){return n.reviews=l}),this.reviewService.getBook(this.bookId).then(function(l){return n.book=l})},n.prototype.addReview=function(n){var l=this;n.bookId=this.bookId,this.reviewService.addReview(n).then(function(n){l.reviews.push(n)}).catch(function(n){return l.errorMessage=n})},n}(),y=u("ZYCi"),w=t.nb({encapsulation:0,styles:[[""]],data:{animation:[{type:7,name:"slideUp",definitions:[{type:1,expr:":enter",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"translateY(+200%)",offset:0},offset:null},{type:6,styles:{transform:"translateY(10px)",offset:.6},offset:null},{type:6,styles:{transform:"translateY(0)",offset:1},offset:null}]},timings:800}],options:null}],options:{}}]}});function I(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(n()(),t.Gb(1,null,[" Sorry, there's been an error communicating with the server: ","\n"]))],null,function(n,l){n(l,1,0,l.component.errorMessage)})}function x(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,2,"tr",[],[[24,"@slideUp",0]],null,null,null,null)),(n()(),t.pb(1,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t.Gb(2,null,["",""]))],null,function(n,l){n(l,0,0,void 0),n(l,2,0,l.context.$implicit.content)})}function k(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t.Gb(1,null,["Reviews for ",""])),(n()(),t.pb(2,0,null,null,1,"app-review-form",[],null,[[null,"createReview"]],function(n,l,u){var t=!0;return"createReview"===l&&(t=!1!==n.component.addReview(u)&&t),t},g,a)),t.ob(3,114688,null,0,b,[],{bookId:[0,"bookId"]},{createReview:"createReview"}),(n()(),t.gb(16777216,null,null,1,null,I)),t.ob(5,16384,null,0,i.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(6,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(n()(),t.pb(7,0,null,null,8,"div",[["class","col-lg-8 col-sm-offset-1"]],null,null,null,null,null)),(n()(),t.pb(8,0,null,null,7,"table",[["class","table table-bordered table-striped"]],null,null,null,null,null)),(n()(),t.pb(9,0,null,null,3,"thead",[],null,null,null,null,null)),(n()(),t.pb(10,0,null,null,2,"tr",[],null,null,null,null,null)),(n()(),t.pb(11,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Review"])),(n()(),t.pb(13,0,null,null,2,"tbody",[],null,null,null,null,null)),(n()(),t.gb(16777216,null,null,1,null,x)),t.ob(15,278528,null,0,i.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var u=l.component;n(l,3,0,u.bookId),n(l,5,0,u.errorMessage),n(l,15,0,u.reviews)},function(n,l){var u=l.component;n(l,1,0,null==u.book?null:u.book.title)})}function R(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"app-review-list",[],null,null,null,k,w)),t.ob(1,114688,null,0,m,[y.a,v],null,null)],function(n,l){n(l,1,0)},null)}var C=t.lb("app-review-list",m,R,{},{},[]),S=u("PCNd"),O={animation:"reviewPage"},P=function(){return function(){}}();u.d(l,"ReviewsModuleNgFactory",function(){return q});var q=t.mb(e,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[o.a,C]],[3,t.j],t.x]),t.xb(4608,i.k,i.j,[t.u,[2,i.q]]),t.xb(4608,h.h,h.n,[i.c,t.B,h.l]),t.xb(4608,h.o,h.o,[h.h,h.m]),t.xb(5120,h.a,function(n){return[n]},[h.o]),t.xb(4608,h.k,h.k,[]),t.xb(6144,h.i,null,[h.k]),t.xb(4608,h.g,h.g,[h.i]),t.xb(6144,h.b,null,[h.g]),t.xb(4608,h.f,h.j,[h.b,t.q]),t.xb(4608,h.c,h.c,[h.f]),t.xb(4608,r.w,r.w,[]),t.xb(4608,v,v,[h.c]),t.xb(1073742336,i.b,i.b,[]),t.xb(1073742336,h.e,h.e,[]),t.xb(1073742336,h.d,h.d,[]),t.xb(1073742336,S.a,S.a,[]),t.xb(1073742336,y.n,y.n,[[2,y.t],[2,y.k]]),t.xb(1073742336,P,P,[]),t.xb(1073742336,r.u,r.u,[]),t.xb(1073742336,r.i,r.i,[]),t.xb(1073742336,e,e,[]),t.xb(256,h.l,"XSRF-TOKEN",[]),t.xb(256,h.m,"X-XSRF-TOKEN",[]),t.xb(1024,y.i,function(){return[[{path:":id",component:m,data:O}]]},[])])})}}]);